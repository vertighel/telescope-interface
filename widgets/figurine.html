<style>
</style>

<button data-var="test" class="btn btn-secondary">test</button>

<div class="container-fluid">
  <div class="row" data-var="container">
  </div>
</div>

<script class="builder">

var figurine=this;

/// D3 devi morire
figurine.create = function(data, columns){

    var idx=0
    data.forEach(function(d){
        var wname="W"+(idx++);
        var div=document.createElement("div"); figurine.container.appendChild(div);
        $(div).addClass("p-1 col-xl-2 col-lg-3 col-md-4 col-sm-6")
        
        if (d.object==undefined) d.object=wname
        if (d.path==undefined) d.path="./images/png/"
        
        factory.create_widget("figurina", figurine, div, wname).then(function(child){
            child.create(d);
//            $(child.card).addClass("p-0 col-xl-2 col-lg-3 col-md-4 col-sm-6")
        });
        
    });

}


/////////////////////////////////////////
/// Test. 
/// Uncomment the test button and click.

$(figurine.test).on("click",function(){
    
var d=[
    {"png":"2018-01-29T06:20:58.png", "binning":1, "date-obs":"2018-01-29T06:20:58", "jd":2458147.76457 , "imagetyp":"raw"}, 
    {"png":"2018-01-29T06:22:05.png", "binning":2, "date-obs":"2018-01-29T06:22:05", "jd":2458147.765346, "imagetyp":"bias"},
    {"png":"2018-01-29T06:23:13.png", "binning":3, "date-obs":"2018-01-29T06:23:13", "jd":2458147.766124, "imagetyp":"flat"},
    {"png":"2018-01-29T06:24:20.png", "binning":1, "date-obs":"2018-01-29T06:24:20", "jd":2458147.766901, "imagetyp":"dark"},
    {"png":"2018-01-29T06:25:27.png", "binning":2, "date-obs":"2018-01-29T06:25:27", "jd":2458147.767678, "imagetyp":"reduced"},
    {"png":"2018-01-29T06:26:34.png", "binning":3, "date-obs":"2018-01-29T06:26:34", "jd":2458147.768455, "imagetyp":"light"},
    {"png":"2018-01-29T06:27:41.png", "binning":1, "date-obs":"2018-01-29T06:27:41", "jd":2458147.769233, "imagetyp":"arcs"}
]
    
    figurine.create(d)
    
})


  
</script>
